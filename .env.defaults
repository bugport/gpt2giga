# NOTE: Defaults reference file. Do NOT modify; copy keys to your .env to override.

# Proxy
GPT2GIGA_HOST=localhost               # Default bind host
GPT2GIGA_PORT=8090                    # Default HTTP port
GPT2GIGA_USE_HTTPS=False              # Proxy serves HTTP by default
GPT2GIGA_HTTPS_KEY_FILE=              # (HTTPS only) path to key
GPT2GIGA_HTTPS_CERT_FILE=             # (HTTPS only) path to cert
GPT2GIGA_LOG_LEVEL=INFO               # CRITICAL|ERROR|WARNING|INFO|DEBUG
GPT2GIGA_PASS_MODEL=False             # Do not pass client model by default
GPT2GIGA_PASS_TOKEN=False             # Do not forward Authorization by default
GPT2GIGA_EMBEDDINGS=EmbeddingsGigaR   # Embeddings model used on /embeddings
GPT2GIGA_ENABLE_IMAGES=True           # Enable images by default
GPT2GIGA_TIMEOUT=600                  # Proxy request timeout (sec)

# Streaming coalescing (disabled by default â†’ passthrough)
GPT2GIGA_STREAM_COALESCE_BYTES=0      # 0 disables byte-based coalescing
GPT2GIGA_STREAM_COALESCE_MS=0         # 0 disables time-based coalescing
GPT2GIGA_STREAM_ADAPTIVE=True         # Adaptive chunk sizing for streaming
GPT2GIGA_STREAM_TARGET_CHUNK_MS=100   # Target time between chunks
GPT2GIGA_STREAM_MIN_BYTES=256         # Min adaptive chunk size
GPT2GIGA_STREAM_MAX_BYTES=8192        # Max adaptive chunk size

# Backend (GigaChat-compatible)
GIGACHAT_BASE_URL=https://gigachat.devices.sberbank.ru/api/v1 # Default upstream
GIGACHAT_MODEL=GigaChat              # Default chat model
GIGACHAT_AUTH_URL=                   # Optional separate auth URL
GIGACHAT_SCOPE=                      # Optional scope
GIGACHAT_CREDENTIALS=                # Optional API key
GIGACHAT_USER=                       # Optional user (if used)
GIGACHAT_PASSWORD=                   # Optional password (if used)
GIGACHAT_ACCESS_TOKEN=               # Optional bearer/JWT
GIGACHAT_PROFANITY_CHECK=False       # Disabled by default
GIGACHAT_VERIFY_SSL_CERTS=True       # Verify TLS by default for HTTPS
GIGACHAT_CA_BUNDLE_FILE=             # Optional custom CA bundle
GIGACHAT_MTLS_AUTH=False             # mTLS disabled by default
GIGACHAT_CERT_FILE=                  # (mTLS) client cert
GIGACHAT_KEY_FILE=                   # (mTLS) client key
GIGACHAT_KEY_FILE_PASSWORD=          # (mTLS) key password
GIGACHAT_TIMEOUT=30                  # Backend timeout (sec)

# Proxy-managed OAuth/JWT acquisition (disabled by default)
GPT2GIGA_AUTH_TOKEN_URL=             # Token endpoint URL
GPT2GIGA_AUTH_BASIC_B64=             # base64(CLIENT_ID:CLIENT_SECRET)
GPT2GIGA_AUTH_GRANT_TYPE=client_credentials # Grant type (empty to omit)
GPT2GIGA_AUTH_SCOPE=                 # Optional scope
GPT2GIGA_AUTH_INSECURE=False         # Disable TLS verification for token fetch

# Embeddings limits config (array format JSON)
GPT2GIGA_EMBEDDINGS_CONFIG_FILE=     # Override path; default gpt2giga/config/embeddings.json


# Embeddings adaptive retry/backoff
GPT2GIGA_EMBEDDINGS_MAX_RETRIES=3
GPT2GIGA_EMBEDDINGS_BACKOFF_BASE_MS=200
GPT2GIGA_EMBEDDINGS_BACKOFF_MAX_MS=5000
GPT2GIGA_EMBEDDINGS_RATE_MIN_MS=0
GPT2GIGA_EMBEDDINGS_RATE_MAX_MS=1000
GPT2GIGA_EMBEDDINGS_RATE_BACKOFF_FACTOR=2
GPT2GIGA_EMBEDDINGS_RATE_SUCCESS_WINDOW=10
GPT2GIGA_EMBEDDINGS_RATE_DROP_TO_AVG_AFTER=10
GPT2GIGA_EMBEDDINGS_RATE_MEDIAN_SAMPLES=21
GPT2GIGA_EMBEDDINGS_TIMEOUT_FACTOR=2
GPT2GIGA_EMBEDDINGS_TIMEOUT_MIN_MS=1000
GPT2GIGA_EMBEDDINGS_TIMEOUT_MAX_MS=60000
GPT2GIGA_EMBEDDINGS_TIMEOUT_MAX_RETRIES=0

